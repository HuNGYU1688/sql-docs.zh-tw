---
title: SQL 弱點評定 | Microsoft Docs
description: 使用 SQL 弱點評量工具，可協助在 SQL Server 中探索、追蹤及修復潛在的資料庫弱點。
ms.custom: ''
ms.date: 11/30/2017
ms.prod: sql
ms.prod_service: security, sql-database
ms.reviewer: ''
ms.technology: security
ms.topic: conceptual
helpviewer_keywords:
- SQL Vulnerability Assessment
author: yualan
ms.author: alayu
monikerRange: =azuresqldb-current||>=sql-server-2016||>=sql-server-linux-2017||=azuresqldb-mi-current
ms.openlocfilehash: b26b7fc306d9eafd1cd9a7c6a9992303e74bc550
ms.sourcegitcommit: 1a544cf4dd2720b124c3697d1e62ae7741db757c
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 12/14/2020
ms.locfileid: "97468529"
---
# <a name="sql-vulnerability-assessment"></a>SQL 弱點評定

[!INCLUDE [SQL Server Azure SQL Database](../../includes/applies-to-version/sql-asdb.md)]

SQL 弱點評定是一種易於使用的工具，可協助您探索、追蹤及補救潛在的資料庫弱點。 使用此工具可主動改進您的資料庫安全性。

**SQL Server 2012** 和更新版本都支援弱點評定，而在 [Azure SQL Database](/azure/sql-database/sql-vulnerability-assessment) 上也能執行此工具。

## <a name="vulnerability-assessment-features"></a>弱點評定功能
SQL 弱點評定 (VA) 是一種可以顯示安全狀態的服務，其中並包含可操作的步驟，以解決安全性問題並強化您的資料庫安全性。 它可協助您：
- 符合要求資料庫掃描報告的合規性需求。 
- 符合資料隱私權標準。
- 監視難以追蹤變更的動態資料庫環境。

VA 服務會直接在您的資料庫上執行掃描。 該服務採用規則知識庫，可以標記安全性弱點，以及提醒偏離最佳做法的項目，例如錯誤的設定、過多的權限，以及未受保護的敏感性資料。 規則是以 Microsoft 建議的最佳做法為基礎，並且著重於對資料庫和其重要資料造成最大風險的安全性問題。 這些規則也代表各種不同管理機構要符合其合規性標準的要求。

掃描結果包含可以解決個別問題的可操作步驟，並於合適的情況下提供自訂的補救指令碼。 您可以為權限設定、功能設定和資料庫設定來設定可接受的基準，以自訂環境的評定報告。 

## <a name="prerequisites"></a>必要條件
只有 SQL Server Management Studio (SSMS) v17.4 或更新版本才提供此功能。 請確認目前使用的是最新版本。 您可以於[此處](../../ssms/download-sql-server-management-studio-ssms.md)找到最新版本。

## <a name="getting-started"></a>開始使用
若要開始在您的資料庫上執行弱點評定，請遵循下列步驟：
   1.   開啟 [SQL Server Management Studio]。

   2.   連線至 SQL Server 資料庫引擎或 localhost 的執行個體。

   3.   展開 [資料庫]，以滑鼠右鍵按一下資料庫，指向 [工作]，選取 [弱點評定]，然後按一下 [掃描弱點]

   4.   您可以掃描其中一個系統資料庫，以執行檢查伺服器層級問題的掃描。 展開 [系統資料庫]，以滑鼠右鍵按一下 **主要** 資料庫，指向 [工作]，選取 [弱點評定]，然後按一下 [掃描弱點]

   ![開始使用](media/sql-vulnerability-assessment/1-SSMSGetStarted.png)

## <a name="tutorial"></a>教學課程
按照下列步驟，在您的資料庫上執行及管理弱點評定。

### <a name="1-run-a-scan"></a>1.執行掃描

[掃描弱點] 對話方塊可讓您指定要儲存掃描的位置。 您可以保留預設位置，或按一下 [瀏覽] 以將掃描結果儲存到其他位置。

當您準備好要掃描時，請按一下 [確定] 來掃描您資料庫的弱點。

  > [!NOTE]   
  > 掃描是輕量且安全的。 它只需要幾秒的時間來執行，而且是完全唯讀的。 它不會對您的資料庫進行任何變更。

![儲存掃描檔案](media/sql-vulnerability-assessment/2-ssmssavescanfile.png)

### <a name="2-view-the-report"></a>2.檢視報告

當掃描完成時，掃描報告會自動顯示在主要 SSMS 窗格中。 報告會顯示安全性狀態的概觀、找到的問題數量，及其對應的嚴重性。 結果中包含偏離最佳做法的警告，以及安全性相關設定的快照，例如資料庫主體和角色及其相關的權限。 掃描報告也會提供在您資料庫中所發現敏感性資料的地圖，並建議可用來保護敏感性資料的內建方法。

![掃描結果](media/sql-vulnerability-assessment/3-ssmsscanresults.png)

### <a name="3-analyze-the-results-and-resolve-issues"></a>3.分析結果並解決問題

檢閱結果並決定報告中所發現的項目何者確實是環境中的安全性問題。 向下鑽研每個失敗的結果，以了解所發現項目的影響，以及每個安全性檢查失敗的原因。 使用報告提供的可操作補救資訊來解決問題。

![結果詳細資料](media/sql-vulnerability-assessment/4-ssmsresultdetails.png)

### <a name="4-set-your-baseline"></a>4.設定您的基準

當您檢閱評量結果時，可以將特定結果標示為環境中可接受的「基準」。 基準本質上就是自訂報告結果的方式。 在後續的掃描中，會將符合基準的結果視為通過。 

一旦您建立了基準安全性狀態，VA 就只會報告偏離基準的項目，讓您能專注於真正相關的問題。

![設定基準](media/sql-vulnerability-assessment/5-ssmssetbaseline.png)

### <a name="5-run-a-new-scan-to-see-your-customized-tracking-report"></a>5.執行新的掃瞄來查看您的自訂追蹤報告

完成設定 **規則基準** 之後，執行新掃描，以檢視自訂的報告。 VA 現在只會報告偏離您所核准基準狀態的失敗安全性問題。

![依基準而通過](media/sql-vulnerability-assessment/6-ssmspassperbaseline.png)

### <a name="6-open-a-previously-run-scan"></a>6.開啟先前執行的掃描

您可以開啟現有的掃描，就可以隨時檢視先前執行弱點評定的結果。 若要如此，請以滑鼠右鍵按一下資料庫，指向 [工作]，選取 [弱點評定]，然後按一下 [開啟現有的掃描]選取您要檢視的掃描結果檔案，然後按一下 [開啟]。 

您也可以從 [檔案] -> [開啟] 功能表來開啟現有的掃描。 選取 [弱點評定]，然後開啟 [掃描] 目錄以尋找您想要檢視的掃描結果。

![開啟現有的掃描](media/sql-vulnerability-assessment/7-ssmsopenexistingscan.png)

VA 現在可用來監視您的資料庫是否隨時維持高層級安全性，以及使否符合您的組織原則。 如果需要合規性報告，VA 報告將有助於進行合規性流程。

## <a name="manage-vulnerability-assessments-using-powershell"></a>使用 PowerShell 管理弱點評定
您可以使用 PowerShell Cmdlet，以程式設計方式來管理 SQL Server 的弱點評定。 您可以使用 Cmdlet，以程式設計方式來執行評定、匯出結果及管理基準。
若要開始使用，請從 PowerShell 資源庫網站下載最新版的 [SqlServer PowerShell 模組](https://www.powershellgallery.com/packages/SqlServer/)。 您可以在[這裡](/archive/blogs/sqlsecurity/powershell-cmdlets-for-managing-sql-vulnerability-assessments)深入了解。

## <a name="next-steps"></a>後續步驟
使用下列資源來深入了解 SQL 弱點評定：
- [在 Azure SQL Database 上執行弱點評定](/azure/sql-database/sql-vulnerability-assessment) 
- [示範使用弱點評定的 Channel 9 影片](https://channel9.msdn.com/Shows/Data-Exposed/Track-and-remediate-potential-database-vulnerabilities-with-SQL-Vulnerability-Assessment) \(英文\)


